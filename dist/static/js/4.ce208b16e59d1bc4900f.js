webpackJsonp([4],{"/hTf":function(t,e){},"04zp":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("woOf"),r=s.n(a),o=s("y2MC"),n=s("8Q2T"),c={name:"reset-password",mixins:[o.a],data:function(){var t=this;return{btnLoading:!1,captchaSrc:"",resetSuccess:!1,formResetPassword:{captcha:"",password:"",passwordAgain:"",token:""},ruleResetPassword:{password:[{required:!0,trigger:"blur",min:6,max:20},{validator:function(e,s,a){""!==t.formResetPassword.passwdCheck&&t.$refs.formResetPassword.validateField("passwordAgain"),a()},trigger:"blur"}],passwordAgain:[{required:!0,validator:function(e,s,a){s!==t.formResetPassword.password&&a(new Error("password does not match")),a()},trigger:"change"}],captcha:[{required:!0,trigger:"blur",min:1,max:10}]}}},mounted:function(){this.formResetPassword.token=this.$route.params.token,this.getCaptchaSrc()},methods:{resetPassword:function(){var t=this;this.validateForm("formResetPassword").then(function(e){t.btnLoading=!0;var s=r()({},t.formResetPassword);delete s.passwordAgain,n.a.resetPassword(s).then(function(e){t.btnLoading=!1,t.resetSuccess=!0},function(e){t.btnLoading=!1,t.formResetPassword.captcha="",t.getCaptchaSrc()})})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{staticClass:"container",attrs:{padding:30}},[s("div",{staticClass:"center",attrs:{slot:"title"},slot:"title"},[t._v("重置密码")]),t._v(" "),t.resetSuccess?[s("Alert",{attrs:{type:"success"}},[t._v("你的密码已经重置完成了")])]:[s("Form",{ref:"formResetPassword",attrs:{model:t.formResetPassword,rules:t.ruleResetPassword}},[s("Form-item",{attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",placeholder:"密码",size:"large"},model:{value:t.formResetPassword.password,callback:function(e){t.$set(t.formResetPassword,"password",e)},expression:"formResetPassword.password"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),t._v(" "),s("Form-item",{attrs:{prop:"passwordAgain"}},[s("Input",{attrs:{type:"password",placeholder:"确认密码",size:"large"},model:{value:t.formResetPassword.passwordAgain,callback:function(e){t.$set(t.formResetPassword,"passwordAgain",e)},expression:"formResetPassword.passwordAgain"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),t._v(" "),s("Form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{prop:"captcha"}},[s("div",{attrs:{id:"captcha"}},[s("div",{attrs:{id:"captchaCode"}},[s("Input",{attrs:{placeholder:"验证码",size:"large"},model:{value:t.formResetPassword.captcha,callback:function(e){t.$set(t.formResetPassword,"captcha",e)},expression:"formResetPassword.captcha"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lightbulb-outline"},slot:"prepend"})],1)],1),t._v(" "),s("div",{attrs:{id:"captchaImg"}},[s("Tooltip",{attrs:{content:"Click to refresh",placement:"top"}},[s("img",{attrs:{src:t.captchaSrc},on:{click:t.getCaptchaSrc}})])],1)])])],1),t._v(" "),s("Button",{staticClass:"btn",attrs:{type:"primary",long:"",loading:t.btnLoading},on:{click:t.resetPassword}},[t._v("重置密码\n  ")])]],2)},staticRenderFns:[]};var d=s("VU/8")(c,i,!1,function(t){s("/hTf")},"data-v-786058f8",null);e.default=d.exports},RjTh:function(t,e){},WaBM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("8Q2T"),r={mixins:[s("y2MC").a],data:function(){return{captchaSrc:"",successApply:!1,btnLoading:!1,formResetPassword:{email:"",captcha:""},ruleResetPassword:{email:[{required:!0,type:"email",trigger:"blur"},{validator:function(t,e,s){""!==e?a.a.checkUsernameOrEmail(void 0,e).then(function(t){!1===t.data.data.email?s(new Error("The email doesn't exist")):s()},function(t){return s()}):s()},trigger:"blur"}],captcha:[{required:!0,trigger:"blur",min:1,max:10}]}}},mounted:function(){this.getCaptchaSrc()},methods:{sendEmail:function(){var t=this;this.validateForm("formResetPassword").then(function(){t.btnLoading=!0,a.a.applyResetPassword(t.formResetPassword).then(function(e){setTimeout(function(){t.btnLoading=!1,t.successApply=!0},2e3)},function(e){t.btnLoading=!1,t.formResetPassword.captcha="",t.getCaptchaSrc()})})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{staticClass:"container",attrs:{padding:30}},[s("div",{staticClass:"center",attrs:{slot:"title"},slot:"title"},[t._v("Lost Password")]),t._v(" "),t.successApply?[s("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n      Success\n      "),s("span",{attrs:{slot:"desc"},slot:"desc"},[t._v("Password reset mail has been sent to your email.")])])]:[s("Form",{ref:"formResetPassword",attrs:{rules:t.ruleResetPassword,model:t.formResetPassword}},[s("Form-item",{attrs:{prop:"email"}},[s("Input",{attrs:{placeholder:"Your Email Address",size:"large"},model:{value:t.formResetPassword.email,callback:function(e){t.$set(t.formResetPassword,"email",e)},expression:"formResetPassword.email"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-email-outline"},slot:"prepend"})],1)],1),t._v(" "),s("Form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{prop:"captcha"}},[s("div",{staticClass:"oj-captcha"},[s("div",{staticClass:"oj-captcha-code"},[s("Input",{attrs:{placeholder:"Captcha",size:"large"},model:{value:t.formResetPassword.captcha,callback:function(e){t.$set(t.formResetPassword,"captcha",e)},expression:"formResetPassword.captcha"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lightbulb-outline"},slot:"prepend"})],1)],1),t._v(" "),s("div",{staticClass:"oj-captcha-img"},[s("Tooltip",{attrs:{content:"Click to refresh",placement:"top"}},[s("img",{attrs:{src:t.captchaSrc},on:{click:t.getCaptchaSrc}})])],1)])])],1),t._v(" "),s("Button",{staticClass:"btn",attrs:{type:"primary",long:"",loading:t.btnLoading},on:{click:t.sendEmail}},[t._v("Send Password Reset Email\n    ")])]],2)},staticRenderFns:[]};var n=s("VU/8")(r,o,!1,function(t){s("RjTh")},"data-v-0e5fbb90",null);e.default=n.exports}});